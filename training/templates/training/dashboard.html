{% extends "training/base.html" %}

{%block content%}

<aside>

    <section>
        <h2>goals</h2>
        {% for goal in goals.all %}
            <a href="{% url 'workout_statistics' goal.name %}">
                <dl class="metric-mixed">
                    <dt>{{ goal.name }}</dt>
                    <dd>{{ goal.left }}</dd>
                    <dd><div class="percent-bar {{ goal.forecast.name }}"><div style="width: {{ goal.percent }}%"> </div></div></dd>
                </dl>
            </a>
        {% empty %}
            <p class="note">You have no goals defined, go ahead and add some.</p>
        {% endfor %}

        <a class="section-link" href="{% url 'goals' %}">manage</a>
    </section>

    {% if statistics.favourites_this_month %}
    <section>
            <h2>this month</h2>
            {% for excercise in statistics.favourites_this_month %}
                <a href="{% url 'workout_statistics' excercise.name %}">
                    <dl class="metric-mixed">
                        <dt>{{ excercise.name }}</dt>
                        <dd>{{ excercise.volume }}</dd>
                        <dd>{{ excercise.count }} times</dd>
                    </dl>
                </a>
            {% endfor %}
        <a class="section-link" href="{% url 'statistics_this_month' %}">more</a>
    </section>
    {% endif %}

</aside>

{% load training_format %}
{% load el_pagination_tags %}

<article>

<section>

{% if statistics.not_started_workouts %}
    <h2>not started</h2>
        {% for workout in statistics.not_started_workouts %}
            <a href="{% url 'workout' workout.id %}">
                <dl>
                    <dt>{{ workout.workout_type }}</dt>
                </dl>
            </a>
        {% endfor %}
{% endif %}

{% paginate 4 statistics.weeks as weeks %}

<p>{% show_pages %}</p>

{% for week in weeks %}
    <h2>{{ week.time_range.start.date }}  .. {{ week.time_range.end.date }}</h2>
    {% for day in week.days %}
        <div class="day">
            <div class="name">
                {{ day.start_time|date:"D" }}
            </div>
            <div class="content">
                {% for workout in day.workouts %}
                    <a href="{% url 'workout' workout.id %}">
                        <dl class="dashboard-workout workout-color-{{ workout.color }}">
                            <dt>
                                <span class="note">
                                    {{ workout.started|date:"P" }}
                                </span>
                                {{ workout.workout_type }}
                            </dt>
                            <dd>
                                {{ workout.volume }}
                                <span class="note">
                                    {% if workout.live %}live{% else %}{{ workout.duration|duration }}{% endif %}
                                </span>
                            </dd>
                        </dl>
                    </a>
                {% endfor %}
            </div>
        </div>
    {% endfor %}
{% empty %}
    <p>your workouts will show up here</p>
{% endfor %}

<p class="pagination">{% show_pages %}</p>

</section>
</article>

{% endblock %}
