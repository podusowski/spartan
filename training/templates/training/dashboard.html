{% extends "training/base.html" %}

{% block nav %}
<nav>
    <a href="{% url 'start_workout' %}">new workout</a>
    <a href="{% url 'upload_gpx' %}">upload gpx</a>
    <a href="{% url 'endomondo' %}">endomondo</a>
    <a href="{% url 'statistics' %}">statistics</a>
</nav>
{% endblock %}

{%block content%}

<h2>your favourites</h2>
<section>
    {% for excercise in statistics.most_popular_workouts|slice:":10" %}
        <dl>
            <dt>{{ excercise.name }} <strong>{{ excercise.count }}</strong></dt>
            <dd>{{ excercise.volume }}</dd>
        </dl>
    {% endfor %}
</section>

{% load training_format %}
{% load el_pagination_tags %}

{% if statistics.not_started_workouts %}
    <h2>not started</h2>
    <section>
        {% for workout in statistics.not_started_workouts %}
            <a href="{% url 'workout' workout.id %}">
                <dl>
                    <dt>{{ workout.workout_type }}</dt>
                </dl>
            </a>
        {% endfor %}
    </section>
{% endif %}

{% paginate 4 statistics.weeks as weeks %}

<section class="pagination">
    {% show_pages %}
</section>

{% for week in weeks %}
    <h2>{{ week.start_time.date }}  .. {{ week.end_time.date }}</h2>
    <section>
        {% for day in week.days %}
            <div class="day-container {{ day.workouts|yesno:"active_day,inactive_day" }}">
                <div class="day-name">
                    {{ day.start_time|date:"D" }}
                </div>
                <div class="day-content">
                    {% for workout in day.workouts %}
                        <a href="{% url 'workout' workout.id %}">
                            <dl>
                                <dt>{{ workout.started|date:"h:m" }} {{ workout.workout_type }}</dt>
                                <dd>
                                    {{ workout.volume }}
                                    <span class="note">
                                        {% if workout.live %}live{% else %}{{ workout.duration|duration }}{% endif %}
                                    </span>
                                </dd>
                            </dl>
                        </a>
                    {% empty %}
                        rest
                    {% endfor %}
                </div>
            </div>
        {% endfor %}
    </section>
{% endfor %}

<section class="pagination">
    {% show_pages %}
</section>

{% endblock %}
