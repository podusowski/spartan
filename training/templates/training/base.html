<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, minimal-ui, user-scalable: no">

    {% load sass_tags %}
    {% load staticfiles %}
    {% load compress %}

    {% compress js/css %}

    <link href="{% sass_src 'training/styles/style.scss' %}" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Exo+2:100,300,400,800" rel="stylesheet">

    <link rel="icon" href="{% static 'training/icons/64.png' %}" sizes="64x64" type="image/png">
    <link rel="icon" href="{% static 'training/icons/128.png' %}" sizes="128x128" type="image/png">

    <meta name="msapplication-square70x70logo" content="{% static 'training/icons/70.png' %}" />
    <meta name="msapplication-square150x150logo" content="{% static 'training/icons/150.png' %}" />
    <meta name="msapplication-square310x310logo" content="{% static 'training/icons/310.png' %}" />

    <meta name="theme-color" content="#111" />
    <meta name="mobile-web-app-capable" content="yes" />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.min.js"></script>

    <script src="{% static 'training/js/utils.js' %}"></script>

    {% endcompress %}

    <title>spartan</title>
</head>

<body>

<div class="flex-container">

    <header>
        <div class="container">
            {%if request.user.is_authenticated%}
                logged as <a href="{% url 'user_profile' %}">{{request.user.username}}</a> (<a href="{% url 'logout' %}">logout</a>)
            {%else%}
                not logged in
            {%endif%}
        </div>
    </header>

    <script>
        function makeMenu(button, content) {
            $(button).click(function() {
                $(content).toggle("fast");
            });

            $(window).resize(function() {
                $(content).removeAttr("style");
            });
        }

        $(document).ready(function() {
            makeMenu("#toggle-menu", "#menu-content");
        });
    </script>

    {% block nav %}
        <nav class="menu">
            <div class="container">
            {% if request.user.is_authenticated %}
                <span class="mobile">
                    <a id="toggle-menu" href="#">&#9776;</a>
                </span>

                <div id="menu-content">
                    <a href="{% url 'dashboard' %}">dashboard</a>
                    <a href="{% url 'start_workout' %}">new workout</a>
                    <a href="{% url 'upload_gpx' %}">upload gpx</a>
                    <a href="{% url 'endomondo' %}">endomondo</a>
                    <a href="{% url 'statistics' %}">statistics</a>
                    <a href="{% url 'explorer' %}">explore</a>
                </div>

                <div class="toolbox">
                    {% block toolbox %}
                    {% endblock %}
                </div>
            {% else %}
                <div id="menu-content">
                    <a href="{% url 'index' %}">home</a>
                </div>
            {% endif %}
            </div>
        </nav>
    {% endblock %}

    {% block content %}
    {% endblock %}

    <footer>
        <p><a href="https://github.com/podusowski/spartan">view spartan on GitHub</a></p>
        <p>we use cookies here, if you don't like it, leave</p>
    </footer>

</div>

</body>

</html>
